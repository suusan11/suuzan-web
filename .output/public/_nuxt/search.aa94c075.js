import{B as q,_ as v,a as w}from"./siteSettings.9816c89e.js";import{_ as P,u as y}from"./Tags.413eb4ee.js";import{a as D,b as I,w as f,q as A,f as c,u as t,h as i,t as d,y as F,i as o,c as g,o as n,j as L}from"./entry.f00074bf.js";const N={class:"l-container l-inner__flex"},b={key:0},R={class:"result"},S={key:0},V={key:1},j={class:"no-result"},G=D({__name:"search",props:{catId:null},async setup(x){let e,a;const _=I(),u=String(_.query.q),p=Number(_.query.page||1),r=q,C={q:u,orders:"-publishedAt",limit:r,offset:(p-1)*r},{data:s}=([e,a]=f(()=>y("/api/postList",{params:C},"$EOYgD1XxSd")),e=await e,a(),e),{data:m}=([e,a]=f(()=>y("/api/tagList","$jIpTxsmRnl")),e=await e,a(),e),l=s.value!==null?s.value.totalCount:null,h=l!==null?Math.ceil(l/r):null;return A(()=>_.query,()=>location.reload()),(O,T)=>{const k=v,B=P,E=w;return n(),c("div",N,[t(s)?(n(),c("main",b,[i("p",R,"\u300C"+d(t(u))+"\u300D\u306E\u691C\u7D22\u7D50\u679C "+d(t(l))+"\u4EF6",1),t(s).contents?(n(),c("div",S,[F(k,{posts:t(s).contents},null,8,["posts"])])):o("",!0),t(s).contents.length==0?(n(),c("div",V,[i("h1",j,"\u300C"+d(t(u))+"\u300D\u306E\u8A18\u4E8B\u306F\u898B\u3064\u304B\u308A\u307E\u305B\u3093\u3067\u3057\u305F\u3002",1)])):o("",!0)])):o("",!0),i("aside",null,[t(m)?(n(),g(B,{key:0,cats:t(m).contents,selectedCatId:x.catId},null,8,["cats","selectedCatId"])):o("",!0)]),t(h)?(n(),g(E,{key:1,numPages:t(h),current:t(p),keyword:t(u)},null,8,["numPages","current","keyword"])):o("",!0)])}}});const Y=L(G,[["__scopeId","data-v-75d12fae"]]);export{Y as default};
